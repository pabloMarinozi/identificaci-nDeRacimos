setwd("~/DHARMA/identificaci-nDeRacimos/identificaci-nDeRacimos/output/salidasICP/nubes_circlenet2")
df <- "nubes_circlenet" %>%
paste0(c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,1),".csv") %>%
map(read_csv) %>% bind_rows() %>% unique()
library(readr)
library(dplyr)
library(purrr)
library(tidyr)
setwd("~/DHARMA/identificaci-nDeRacimos/identificaci-nDeRacimos/output/salidasICP/nubes_circlenet2")
df <- "nubes_circlenet" %>%
paste0(c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,1),".csv") %>%
map(read_csv) %>% bind_rows() %>% unique()
# %>%
#   left_join(read_csv("nube1_names.csv")) %>%
#   left_join(read_csv("nube2_names.csv")) %>%
#   filter(name1 %in% buenas01) %>%
#   filter(name1 %in% buenas03) %>% mutate(corrida = "01_03")
library(stringr)
df <- df %>% mutate(nube1_frame2 = nube1 %>% str_split("_") %>% map(tail,2) %>% map(tail,1) %>% str_replace(".ply",""),
nube1_frame1 = nube1 %>% str_split("_") %>% map(tail,2) %>% map(head,1) %>% unlist(),
nube2_frame1 = nube2 %>% str_split("_") %>% map(tail,2) %>% map(head,1) %>% unlist(),
nube2_frame2 = nube2 %>% str_split("_") %>% map(tail,2) %>% map(tail,1) %>% str_replace(".ply",""))
View(df)
setwd("~/DHARMA/identificaci-nDeRacimos/identificaci-nDeRacimos/output/salidasICP/nubes_circlenet2")
df <- "nubes_circlenet" %>%
paste0(c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,1),".csv") %>%
map(read_csv) %>% bind_rows() %>% unique()
# %>%
#   left_join(read_csv("nube1_names.csv")) %>%
#   left_join(read_csv("nube2_names.csv")) %>%
#   filter(name1 %in% buenas01) %>%
#   filter(name1 %in% buenas03) %>% mutate(corrida = "01_03")
View(df)
View(df)
View(df)
library(dplyr)
library(stringr)
library(purrr)
library(ggplot2)
library(readr)
library(dplyr)
library(purrr)
library(tidyr)
setwd("~/DHARMA/identificaci-nDeRacimos/identificaci-nDeRacimos/output/salidasICP/nubes_circlenet2")
df <- "nubes_circlenet" %>%
paste0(c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,1),".csv") %>%
map(read_csv) %>% bind_rows() %>% unique()
# %>%
#   left_join(read_csv("nube1_names.csv")) %>%
#   left_join(read_csv("nube2_names.csv")) %>%
#   filter(name1 %in% buenas01) %>%
#   filter(name1 %in% buenas03) %>% mutate(corrida = "01_03")
View(df)
setwd("~/DHARMA/identificaci-nDeRacimos/identificaci-nDeRacimos/output/salidasICP/nubes_circlenet2")
df <- "nubes_circlenet" %>%
paste0(c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,1),"_saved.csv") %>%
map(read_csv) %>% bind_rows() %>% unique()
# %>%
#   left_join(read_csv("nube1_names.csv")) %>%
#   left_join(read_csv("nube2_names.csv")) %>%
#   filter(name1 %in% buenas01) %>%
#   filter(name1 %in% buenas03) %>% mutate(corrida = "01_03")
View(df)
library(stringr)
df <- df %>% mutate(nube1_frame2 = nube1 %>% str_split("_") %>% map(tail,2) %>% map(tail,1) %>% str_replace(".ply",""),
nube1_frame1 = nube1 %>% str_split("_") %>% map(tail,2) %>% map(head,1) %>% unlist(),
nube2_frame1 = nube2 %>% str_split("_") %>% map(tail,2) %>% map(head,1) %>% unlist(),
nube2_frame2 = nube2 %>% str_split("_") %>% map(tail,2) %>% map(tail,1) %>% str_replace(".ply",""))
View(df)
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot() + geom_histogram(df %>% filter(radio == r,label==True),aes(matcheos),color="darkblue") + scale_x_continuous(breaks = seq(0, 35, by = 1)) + geom_histogram(df %>% filter(radio == r,label==True),aes(matcheos),color="darkblue") + scale_x_continuous(breaks = seq(0, 35, by = 1)) + ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot() + geom_histogram(df %>% filter(radio == r,label==TRUE),aes(matcheos),color="darkblue") + scale_x_continuous(breaks = seq(0, 35, by = 1)) + geom_histogram(df %>% filter(radio == r,label==FALSE),aes(matcheos),color="darkblue") + scale_x_continuous(breaks = seq(0, 35, by = 1)) + ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot() +
geom_histogram(data = df %>% filter(radio == r,label==TRUE),
mapping = aes(matcheos), color="darkblue") +
geom_histogram(data = df %>% filter(radio == r,label==FALSE),
mapping = aes(matcheos),color="red") +
scale_x_continuous(breaks = seq(0, 35, by = 1)) +
ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot() +
geom_histogram(data = df %>% filter(radio == r),
mapping = aes(matcheos), color=label) +
scale_x_continuous(breaks = seq(0, 35, by = 1)) +
ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot(df %>% filter(radio == r)) +
geom_histogram(aes(x=matcheos, color=label)) +
scale_x_continuous(breaks = seq(0, 35, by = 1)) +
ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot(df %>% filter(radio == r)) +
geom_histogram(aes(x=matcheos, color=label)) +
scale_x_continuous(breaks = seq(0, 35, by = 1)) +
ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot(df %>% filter(radio == r)) +
geom_histogram(aes(x=matcheos, color=label, fill=label)) +
scale_x_continuous(breaks = seq(0, 35, by = 1)) +
ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot(df %>% filter(radio == r)) +
geom_histogram(aes(x=matcheos, color=label, fill=label, position="dodge")) +
scale_x_continuous(breaks = seq(0, 35, by = 1)) +
ggtitle(paste("radio:",r))
)
}
library(ggplot2)
radios <- df$radio %>% unique()
for (r in radios){
plot(ggplot(df %>% filter(radio == r)) +
geom_histogram(aes(x=matcheos, color=label, fill=label), position="dodge") +
scale_x_continuous(breaks = seq(0, 35, by = 1)) +
ggtitle(paste("radio:",r))
)
}
View(df)
getf1_data <- function(m, data){
data %>%
mutate(label = name1 == name2) %>%
mutate(fitness = matcheos/tamaño_nube1) %>%
mutate(prediction = matcheos>m) %>%
group_by(radio) %>% summarise(
TP = sum(label==TRUE & prediction==TRUE),
TN = sum(label==FALSE & prediction==FALSE),
FP = sum(label==FALSE & prediction==TRUE),
FN = sum(label==TRUE & prediction==FALSE),
precission = TP/(TP+FP), recall = TP/(TP+FN),
F1 = 2*(precission*recall)/(precission+recall)) %>%
mutate(m=m)
}
getf1_data_filter <- function(m, data){
data %>%
mutate(label = name1 == name2) %>%
filter(tamaño_nube1>m & tamaño_nube2>m) %>%
mutate(fitness = matcheos/tamaño_nube1) %>%
mutate(prediction = matcheos>m) %>%
group_by(radio) %>% summarise(
TP = sum(label==TRUE & prediction==TRUE),
TN = sum(label==FALSE & prediction==FALSE),
FP = sum(label==FALSE & prediction==TRUE),
FN = sum(label==TRUE & prediction==FALSE),
precission = TP/(TP+FP), recall = TP/(TP+FN),
F1 = 2*(precission*recall)/(precission+recall)) %>%
mutate(m=m)
}
```{r}
f1_df <- 3:15 %>% map(getf1_data,df) %>% bind_rows()
getf1_data <- function(m, data){
data %>%
mutate(fitness = matcheos/tamaño_nube1) %>%
mutate(prediction = matcheos>m) %>%
group_by(radio) %>% summarise(
TP = sum(label==TRUE & prediction==TRUE),
TN = sum(label==FALSE & prediction==FALSE),
FP = sum(label==FALSE & prediction==TRUE),
FN = sum(label==TRUE & prediction==FALSE),
precission = TP/(TP+FP), recall = TP/(TP+FN),
F1 = 2*(precission*recall)/(precission+recall)) %>%
mutate(m=m)
}
getf1_data_filter <- function(m, data){
data %>%
filter(tamaño_nube1>m & tamaño_nube2>m) %>%
mutate(fitness = matcheos/tamaño_nube1) %>%
mutate(prediction = matcheos>m) %>%
group_by(radio) %>% summarise(
TP = sum(label==TRUE & prediction==TRUE),
TN = sum(label==FALSE & prediction==FALSE),
FP = sum(label==FALSE & prediction==TRUE),
FN = sum(label==TRUE & prediction==FALSE),
precission = TP/(TP+FP), recall = TP/(TP+FN),
F1 = 2*(precission*recall)/(precission+recall)) %>%
mutate(m=m)
}
f1_df <- 3:15 %>% map(getf1_data,df) %>% bind_rows()
View(f1_df)
ggplot(f1_df) +
geom_line(aes(x = m, y = F1)) +
geom_line(aes(x = m, y = precission, col="precission")) +
geom_line(aes(x = m, y = recall, col ="recall")) +
facet_wrap(~radio) +
#xlim(3,15) +
xlab("matcheos") +
scale_y_continuous(breaks = c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1)) +
scale_x_continuous(limits=c(3,15),breaks = seq(0, max_bayas, by = 1)) +
theme(
panel.grid.major.x = element_line( size=.1, color="black" ),
panel.grid.major.y = element_line( size=.1, color="black" )
)
ggplot(f1_df) +
geom_line(aes(x = m, y = F1)) +
geom_line(aes(x = m, y = precission, col="precission")) +
geom_line(aes(x = m, y = recall, col ="recall")) +
facet_wrap(~radio) +
#xlim(3,15) +
xlab("matcheos") +
scale_y_continuous(breaks = c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1)) +
scale_x_continuous(limits=c(3,15),breaks = seq(0, 15, by = 1)) +
theme(
panel.grid.major.x = element_line( size=.1, color="black" ),
panel.grid.major.y = element_line( size=.1, color="black" )
)
ggplot(f1_df) +
geom_line(aes(x = m, y = F1, col="F1")) +
geom_line(aes(x = m, y = precission, col="precission")) +
geom_line(aes(x = m, y = recall, col ="recall")) +
facet_wrap(~radio) +
#xlim(3,15) +
xlab("matcheos") +
scale_y_continuous(breaks = c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1)) +
scale_x_continuous(limits=c(3,15),breaks = seq(0, 15, by = 1)) +
theme(
panel.grid.major.x = element_line( size=.1, color="black" ),
panel.grid.major.y = element_line( size=.1, color="black" )
)
ggplot(f1_df) +
geom_line(aes(x = m, y = F1)) +
geom_line(aes(x = m, y = precission, col="precission")) +
geom_line(aes(x = m, y = recall, col ="recall")) +
facet_wrap(~radio) +
#xlim(3,15) +
xlab("matcheos") +
scale_y_continuous(breaks = c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1)) +
scale_x_continuous(limits=c(3,15),breaks = seq(0, 15, by = 1)) +
theme(
panel.grid.major.x = element_line( size=.1, color="black" ),
panel.grid.major.y = element_line( size=.1, color="black" )
)
ggplot(f1_df) +
geom_line(aes(x = m, y = F1)) +
geom_line(aes(x = m, y = recall, col ="recall")) +
geom_line(aes(x = m, y = precission, col="precission")) +
facet_wrap(~radio) +
#xlim(3,15) +
xlab("matcheos") +
scale_y_continuous(breaks = c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1)) +
scale_x_continuous(limits=c(3,15),breaks = seq(0, 15, by = 1)) +
theme(
panel.grid.major.x = element_line( size=.1, color="black" ),
panel.grid.major.y = element_line( size=.1, color="black" )
)
ggplot(f1_df) +
geom_line(aes(x = m, y = F1)) +
geom_line(aes(x = m, y = precission, col="precission")) +
geom_line(aes(x = m, y = recall, col ="recall")) +
facet_wrap(~radio) +
#xlim(3,15) +
xlab("matcheos") +
scale_y_continuous(breaks = c(0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1)) +
scale_x_continuous(limits=c(3,15),breaks = seq(0, 15, by = 1)) +
theme(
panel.grid.major.x = element_line( size=.1, color="black" ),
panel.grid.major.y = element_line( size=.1, color="black" )
)
